@startuml
skinparam classAttributeIconSize 0
skinparam shadowing false
skinparam linetype ortho
autonumber

title Test Case Execution Flow

participant Program
participant StrategyFactory
participant TestCaseFactory
participant TestHarness
participant Strategy
participant Validator
participant Benchmark

== Initialization Phase ==

Program -> StrategyFactory : GetStrategies()
StrategyFactory --> Program : List<IProblemStrategy>

Program -> TestCaseFactory : GetTestCases()
TestCaseFactory --> Program : List<TestCase>

== Execution Phase ==

loop For each strategy
    Program -> TestHarness : Create(strategy, comparer)
    Program -> TestHarness : RunTests(testCases)

    loop For each test case
        TestHarness -> Strategy : Solve(input)
        activate Strategy
        Strategy --> TestHarness : output
        deactivate Strategy

        TestHarness -> Validator : Compare(output, expected)
        Validator --> TestHarness : result
    end
end

== Benchmarking Phase ==
Program -> Benchmark : Run(strategies, testCases, comparer)
Benchmark --> Program : List<BenchmarkResult>

== Summary Phase ==
Program --> Program : Display summary + failed cases + timing

@enduml