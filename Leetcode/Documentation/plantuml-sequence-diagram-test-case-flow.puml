@startuml
' Layout and rendering fixes
skinparam classAttributeIconSize 0
skinparam shadowing false
skinparam linetype ortho
skinparam dpi 300
scale 1.5
autonumber

title Test Case Execution Flow

participant Program
participant StrategyFactory
participant TestCaseFactory
participant ComparerResolver
participant TestHarness
participant Strategy
participant Validator
participant Benchmark

== Initialization Phase ==

Program -> StrategyFactory : GetStrategies(problemType)
StrategyFactory --> Program : List<IProblemStrategy>

Program -> TestCaseFactory : GetTestCases(problemType)
TestCaseFactory --> Program : List<TestCase>

Program -> ComparerResolver : GetComparer(problemType)
ComparerResolver --> Program : comparer function

== Execution Phase ==

loop For each strategy
    Program -> TestHarness : Create(strategy, comparer)
    Program -> TestHarness : RunTests(testCases)

    loop For each test case
        TestHarness -> Strategy : Solve(input)
        activate Strategy
        Strategy --> TestHarness : output
        deactivate Strategy

        TestHarness -> Validator : Compare(output, expected)
        Validator --> TestHarness : result
    end
end

== Benchmarking Phase ==
Program -> Benchmark : Run(strategies, testCases, comparer)
Benchmark --> Program : List<BenchmarkResult>

== Summary Phase ==
Program --> Program : Display summary + failed cases + timing

@enduml